"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _lodash=require("lodash"),_config=require("../../../config"),_errors=require("../../errors"),_hints=_config.sns.hints;function getHints(targetHint){var termHints,hints=(0,_lodash.filter)(_hints,function(currHint){return currHint.targetHint===targetHint});return(0,_lodash.flatten)((0,_lodash.map)(hints,function(currHint){return termHints=currHint.termHint,(0,_lodash.isString)(termHints)?currHint.termHint:(0,_lodash.map)(termHints,function(hint){return hint+("sportscombo"===targetHint?currHint.osPostfix:"")})}))}function getInput(req,res,next){var input={id:req.input.id,deviceSubject:req.input.subject,deviceMessage:req.input.message,termHints:req.input.target};return(0,_lodash.forOwn)(input,function(value,key){return value||"deviceSubject"===key?void("termHints"===key&&(req.originalTarget=value,value=getHints(value),(0,_lodash.isString)(value)&&(value=[value])),req[key]=value):next((0,_errors.makeError)("MissingInput","Missing "+key+" in request input.","Helpers getInputDeviceSend",400))}),next()}exports.default=getInput;